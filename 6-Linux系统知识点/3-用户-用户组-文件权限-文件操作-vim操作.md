### 一、查看用户信息 

**用户名与UID**的对应关系`/etc/passwd`

```
// cat /etc/passwd
root:x:0:0:root:/root:/bin/bash  ==>第一行内容，以冒号分隔
解析：
root  用户
x  目前没用了
0  每个用户ID
0  一个组的ID   （0的权限是最高的）
root  对当前用户的描述
/root  root的家目录
/bin/bash  给每个登录后用户分配bash的shell，（如果是nologin说明未登录的那么就不会分配shell给该用户）

//自己用户的位置
ccq:x:1000:1000:ccq,,,:/home/ccq:/bin/bash
我们的ID从1000开始分配的，前1000都是系统的用户；在CentOS中是500之后分配，Ubuntu是1000之后的。

```



### 二、查看用户密码信息

**用户的密码信息**都是保存在记录在 `/etc/shadow`中

```
sudo cat /etc/shadow
//ubuntu为了系统安全，初识是不让使用root账号密码的,刚开始可能是空的

//自己用户名的shadow格式：
ccq:$6$kNa7BRf3$yyaxRto2kNtKZHv5AsCa3gEVbxikXogvO7ZqqTsNmTmUJo7Q/rgq1fZj.Ww87mo7LdT3Tbn8xLQSTGeDqvQe21:18134:0:99999:7:::
//前者是密码的加密后的密文 ：
//后面依次：
	最后一次修改密码的时间  18134   ==>按照天数的时间戳
	密码几日不可修改(0可以随时修改)  ==> 0
	密码有效天数   ==> 99999
	密码失效前几天提示用户改密码(每次登陆时提醒您)  ==> 7 
	如果都是:::是为空。

//比如登录服务器会出现提示信息：
	last failed login ==>最近失败的一次登录，
```

#### 2.1 简单的加密

加密命令：`shasum -a 256 文件名`   ==>给该文件加密，得到以256位的密钥 

目前 shasum  比md5 加密要好点  、 两者都是单向加密

### 三、查看用户组信息 

用户组与GID 的对应关系 `/etc/group`

``` 
cat /etc/group

比如：adm:x:4:syslog,ccq   ==>adm是组名，x是保存的密码，现在已废弃，4就是组的ID，最后是组员的用户名
```

### 四、修改密码

```
passwd 用户名
//修改root的密码需要使用sudo
sudo passwd root  
这是强行改密码，覆盖之前的密码
```

### 五、用户管理

1、创建用户  `useradd -mU -G 组名 -p 密码 用户名`

​		-mU   ==> m是创建个人文件夹，U创建与用户同名的组

+ 参数：
  + -G  组名 ==>放到该组里面
  + -U  创建和用户同名的组
  + -m   在home中创建用户的家目录
  + -s  新用户登录的 shell （建议设置）
  + -p  加密后的新账户密码
  + useradd  -D    ==>查看该用户的默认设置  

```
sudo useradd abc   ==>这样创建home都没有，什么都没有

//下面是创建了比较完整的用户
sudo usermod -mU -s /bin/bash -G 组名1,组名2  新用户名
passwd 新用户名 
其中：-G 组名  ==> 给一个新用户分了一个组，建议是 组sudo，因为可以使用sudo命令。
可以先不设置密码，创建用户完成后，可以 

```

2、切换用户

su  用户名1  ==>切换到用户1，这是就是使用bash的shell命令了。

​	`ccq1@ccq-VirtualBox:/home/ccq$   `

su -  用户名1  ==> 使用 - 相当于重新登录了该用户，回到用户1的home目录，会初始化用户1 的一些信息。建议切换用户使用 - 

​		`ccq1@ccq-VirtualBox:~$  `

3、删除用户  `userdel 用户名`

​	-r 递归删除

​	-f  强制操作

### 六、组的管理

1、添加一个组`groupadd 组名`

```
参数：
  -f, --force			如果组已经存在则成功退出
                          并且如果 GID 已经存在则取消 -g
  -g, --gid GID               为新组使用 GID
  -h, --help                  显示此帮助信息并推出
  -K, --key KEY=VALUE         不使用 /etc/login.defs 中的默认值
  -o, --non-unique            允许创建有重复 GID 的组
  -p, --password PASSWORD     为新组使用此加密过的密码
  -r, --system                创建一个系统账户
  -R, --root CHROOT_DIR       chroot 到的目录
      --extrausers            Use the extra users database

```

sudo groupadd -g 1010 组名

没有给组的ID，系统会自动 给组ID

2、删除组 `groupdel 组名`



3、**groups  用户名**  

查看用户所在的一些组

4、`usermod`修改用户的属性

```
usermod -aG  sudo 用户名1    ==>此时用户名多了一个 sudo 组
//需要注意：前面可以利用sudo命名的用户来操作
输入 id  可以得到用户的个人uid、gid、组 信息
id -u   查看用户的uid
id -g   查看用户的gid
```

5、 gpasswd 命令

5.1 gpasswd命令是Linux下工作组文件/etc/group和/etc/gshadow的管理工具，用于指定要管理的工作组。

5.2参数：

      -a : 添加用户到组
    
      -d : 从组删除用户
    
      -A：指定管理员
    
      -M：指定组成员和-A的用途差不多；
    
      -r：删除密码；
    
      -R：限制用户登入组，只有组中的成员才可以用newgrp加入该组。

5.3实例：

    // 将userA添加到groupB用户组里面：  
     gpasswd -a userA groupB
　　注意：添加用户到某一个组可以使用  usermod -G groupB userA 这个命令可以添加一个用户到指定的组，但是**以前添加的组就会清空掉，**所以想要添加一个用户到一个组，同时保留以前添加的组时，请使用gpasswd这个命令来添加操作用户。

    //将userA设置为groupA的群组管理员：
     gpasswd -A userA groupA


### 七、查看登录的用户

1、当前正在登录

**who**   ==> 查看**当前**机器都有哪些用户登录

**w**  ==>开机时间，一共开了多久，几个用户，当前操作系统平均负载：1分钟、5分钟、15分钟，当前哪些用户在登录， 显示该用户使用的哪些命令

2、**last**    查看历史记录

root指的是自己、reboot指重启、别人登入过会留下用户名

3、**lastb**   查看历史记录中失败登录的信息

4、**lastlog**  查看用户最后登录的信息

ls /var/log/   ==>里面的lastlog删除了，记录就删除了

history 用来记录你都执行哪些操作的，默认没有时间的，  要删除的话，把这个也删除了。

### 八、文件权限

linux中有三种：

+ r    读权限
+ w  写权限
+ x  执行权限（判断文件是否可以执行，文件本身类型和扩展名无关，）

#### 1、查看文件权限

+ ls  -l    简写成  ll

  + ll  ==>指的是别名   相当于给一一串命令起个别名，用这个别名就代表该命令

    ​	定义别名：**alias  别名=“需要别名的一条命名”**

  + **cat  ~/bashrc**   ==>查看别名命令，

![](/image/QQ图片20190829211213.png)

d  表示为 目录，**第1位表示类型**，（**l 指链接**）**-** 普通文件、c (设备文件-dev里面的文件)、s（特殊文件比如linux中的socket文件）

上图**选中的部分为权限字符**，总共**9位**，分为**3**组，每组**3位**

+ 第一组：user文件拥有者   代号：**u**

+ 第二组：group和我同组的用户权限   代号：**g**

+ 第三组：other指其他用户的权限   代号： **o**
+ 代表三者的是： **a**    

后面的**第一个 ccq** 指的拥有者(即用户名)、**第二个**ccq 指的是：组名（属于哪个组的）

#### 2、文件修改权限

+ **chmod**
  + chmod  u+x  文件   ==>给 文件 的**第一组 u** 加了个x权限，
  + 注意：**去除权限**  减号 **-** 
  + 同时给**多个对象**设置权限(对象指的是u、g、o)
    + chmod **u=**rwx,**g=**rx,**o=**r 文件全名    ==>使用 **= 号** 
    + chmod   **a-**wx  文件名    ==> 利用 **a** 把三个对象的权限都去除wx权限
    + **chmod -R  o+w  文件夹**   ==>利用**-R**给文件夹下的所有o对象权限加了 w权限
  + chmod  777 文件名   ==>全部都是都有权限
  + chmod  000  文件名  ==> 全部都没有权限
    + 4 => r读取、2 => w 写入 、 1 = >  x 执行
    + 上面 777 三位数：分别的 u 、g 、 o 三个对象 
    + 需要要给啥权限，直接利用数字组合即可

#### 3、修改文件的拥有者

​	**chown**

+ **chown  目标用户   文件**   ==> **目标用户就是文件的新拥有者**
+ chown  **:组名**   文件    ==> :组名  ,修改了文件的组
+ 两者都改
  
  + chown   **目标用户：组名**   文件   ==>
+ 利用ID来修改
  
  + chown  **uid：gid**  文件   ==>改成了对应id的用户、组名
  
+ ```
    chown `id -u`:`id -g` 文件名  ==>利用 反引号，先执行反引号内的命令
    ```
  
+ 将**用户1获取另外一个用户2**所有文件（将拥有者和所在组改了即可，利用**-R**来遍历）

  ```
  sudo chown -R 'id -u':'id -g' 文件夹
  //把文件夹下的所有文件都变成对应uid、gid的用户、组名
  ```


which  文件  ==>可以得到文件的路径

### 九、文件操作

#### 1、echo

echo   “aaaa\nbbbb”    == >\n 是没有效果的。

**echo  -e**  “aaaa\nbbbb”  ==>加个参数 -e ，换行\n 起作用

echo   -e  "aaaa\nbbb"  **>** 文件1     ==>  符号 > 代表着重定向，把标准输出中内容写入文件1，，

​     `cat  文件1 >  文件2`      ==>把文件1内容写入文件1

​	`cat  >  xyz  <<  EDF`     ==>(<<重定向输入，结束用EDF,,其内容会写入文件中)

​	

echo   -e  "aaaa\nbbb"  **>>**  文件1    ==>  **两个重定向**，把内容**追加到文件**1中



#### 2、man

**man**  命令手册

+ **man  cat**   ==>直接看cat的命令说明

#### 3、head与tail

**head -n  10  文件**   ==>查看文件的**前10行**内容

**tail -n  10 文件**   ==> 查看文件的**后10行**内容

#### 4、less

**less   文件**   ==>  查看文件，不会打印全部 需要用 less 的操作

+ j  上滚动，一行一行滚
+ k  下滚动 ，一行一行滚
+ b  上翻屏
+ f   下翻屏
+ 空格  下翻屏
+ **：**   在最下面有个冒号**：输入10 ，向下显示10行**
+ g   文件开头
+ G  文件结尾
+ **v**   使用配置的编辑器**编辑当前文件**
+ q  或者 ZZ   退出less

**less  -N  文件**  ==>左侧**显示 行号**

```
less应用场景：
应用场景
//查看文件
less 文件全名

//浏览多个文件
less 文件名1 文件名2

//ps查看进程信息并且通过less分页显示
ps -ef | less

//查看命令历史记录，分页的形式显示
history | less  
```

#### 5、sort 

**sort  文件**  ==> 按照**行单位排序**，如果没有行号，按照字符的**ascii顺序排序**。

- sort **-r**  文件名  ==> 加个参数 -r   ，按照**倒序**排。 
- -n  按照数**值大小**排序 
- -m 将排序好的文件进行**合并**
- -f  将小写字母**视为大写**字母
- -o 将结果保存到指定文件中
  - sort test.txt  -o  test.txt  
- **-c**  检查文件是否已经按照顺序排序。

+ cat 文件1 |  sort      ==> **|**  是个**管道符**，把**前者的数据**通过|传送给 后者

#### 6、uniq

**uniq**  去重(删除文件内容中有重复行的)，注意配合sort 来使用，否则没有效果

+ cat 文件1 | sort | uniq     ==> 需要先排序，在去重
+ uniq参数 （不加参数直接去除重复的行）
  + **-c**   显示重复的出现的个数
    + uniq **-c** 文件名   ==> 参数 -c  返回重复的行，开头是重复的次数
  + **-d**  仅显示**重复**出现的行列。
  + **-u**  仅显示出现**一次**的行列。
  + 注意：如果文件**没有排序**，那么 **uniq 命令是无效的**。

#### 7、wc

wc  是 统计单词数量，计算文件的行数或列数、字数、字节

+ **-c**  或 -bytes  **只**显示 bytes数
+ **-l**  或 -lines    只显示 **行**数
+ **-w**  或 -words  只显示 **字**数
+ **wc  文件1 文件2 **  ==> 统计三个文件的信息
  - 会先分别显示每个文件的信息，**行数、字数、字节、文件名**
  - 最后，会对上面三者进行计算 **总和**。

#### 8、grep命令

​	用于查找文件里符合条件的字符串。

- **grep  text  *text**      ==>找**后缀有text字样文件**里面还有**text字符串**的一行数据。 
- grep  text   **text***   ==> *号在后面，那么就找**前缀有text字样**的文件。
- 参数：
  - -i	忽略大小写
  - -I    忽略二进制文件 
  - -a   不要忽略二进制的数据
  - **-A**   显示匹配的字符及后面的指定行数的数据，After
    - **grep  -A  3   字符**    ==>找到 字符 **后面的3行**数据
    - 如果找**前面的3行**，-B  3   ==> B指定是 Before
    - 如果找**前后3行**， -C  3    ==>c  指的是center
  - -r    递归查找，遍历指定目录下所有文件, **指定路径**
  - -n   匹配到字符串，**打印所在的行**号
  - -c    匹配到该字符串，只显示匹配到的**个数**
  - -l     匹配到该字符串，只显示其的**文件列表**
  - -o    **只显示匹配到的单词**
  - -v     **反向**查找，相当于取非，**显示不包含匹配的文本行**
  - **-E '表达式'**     将样式为延伸的普通表示法来使用（比如通过正则表达式匹配）
  - --include='*.py'   **仅包含**py的文件
  - --exclude='*.js'    **不包含**js的文件

### 十、vim 

​	终端编辑器，编辑器之神。对手==> Emacs 神的编辑器

**vim  文件名  +58**    == > 打开文件，**光标直接跳转至 58行**

注释： **一个双引号  “**

#### 1、插入模式 

​	i 、

#### 2、命令模式

- **j**   上 、**k**  下、**h**  左**、l**   右

- shift + v  选中当前行，利用上面的jkhl来进行**选取多行**

- 以 **d 开头**

  - dw   删除一个单词
  - d2w    ==>指的是删除 当前光标开始的 2 个单词
  - dl    删除一个字母
  - dd    删除整行
  - dnd  删除光标后n行

- 以 **y 开头**

  - yw    复制光标处**单词**
  - yl     复制光标处的**字母**
  - yy    复制**整行**
  - yny  复制光标**后的n行 ** （n为数字）

- 以**c 开头**

  - cw   剪切一个单词
  - cl     剪切 一个字母
  - cc    剪切一整行
  - cnc   剪切光标后的n行 (n位数字)
  - 4s     ==> 剪切当前光标 开始的 **后 4个字符**   （p粘贴当前光标下一个位置）

  注意：**剪切后，会进入插入模式。**

- shift + g    ==>结尾

- gg   ==>开头

- shift + l  ==>跳到当前屏幕下最下面一行

- shift + h  ==> 跳到当前屏幕的最上面一行

- shift + m  ==>跳转都屏幕的中间

- u    撤销

- ctrl + r  重做

- **ctrl + v**  选取列，列编辑，通过上下来选取。如果进入插入模式，修改一行，那么选中的列在退出插入模式后也会被修改的。

- P (大写)  粘贴上一行

- p(小写)   粘贴下一行

#### 3、底层模式

​	w   保存

​	q    退出

​	q!   强制退出

​	wq  保存退出

​	wq！强制保存，退出	

​	set nu    显示内容行号

​	set nonu   关闭行号

​	set spell     开启拼写检查功能 （关闭加个 no）

​	行数      直接输入函数，光标直接跳转至该行

​	**%s/旧内容/新内容/g**     ==>%s 是指的全文操作。**替换**旧内容

​	**/ 关键字**    匹配关键字符。并**高亮显示**，按**n **匹配**下一个**关键字，**N** 匹配**上一个**

​	**sp filename **     ==>在vim窗口上半部分打开另一个文件(**同时编辑两个文件**)

​	多个窗口: ==> **ctrl +w + 方向**   切换窗口

前两者切换使用  ESC   

shift+：  ==> 进入底层模式，

4、vim 配置

```
.vimrc 配置文件正在家目录下
touch .vimrc  
```



